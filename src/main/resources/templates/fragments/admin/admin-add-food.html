<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
</head>

<body>
    <!-- Add Food Modal Fragment -->
    <div class="modal fade" id="addFoodModal" tabindex="-1" th:fragment="add-food-modal(food)">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" th:if="${food == null}">
                        <i class="fas fa-plus me-2"></i>Add New Food
                    </h5>
                    <h5 class="modal-title" th:if="${food != null}">
                        <i class="fas fa-edit me-2"></i>Edit Food
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addFoodForm"
                        th:action="${food != null} ? @{/api/foods/{id}(id=${food.id})} : @{/api/foods}"
                        th:method="${food != null} ? 'put' : 'post'">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <input type="hidden" name="id" th:if="${food != null}" th:value="${food.id}" />

                        <div class="alert alert-danger alert-dismissible fade show" role="alert" style="display: none"
                            id="foodFormError">
                            <i class="fas fa-exclamation-circle me-2"></i>
                            <span></span>
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                        <div class="mb-3">
                            <label for="foodName" class="form-label">Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="foodName" name="name"
                                th:value="${food != null} ? ${food.name} : ''" required />
                        </div>

                        <div class="mb-3">
                            <label for="foodDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="foodDescription" name="description" rows="3"
                                th:text="${food != null} ? ${food.description} : ''"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="foodCategory" class="form-label">Category <span
                                    class="text-danger">*</span></label>
                            <select class="form-select" id="foodCategory" name="category" required>
                                <option value="">Select category</option>
                                <option value="Italian" th:selected="${food != null and food.category == 'Italian'}">
                                    Italian
                                </option>
                                <option value="American" th:selected="${food != null and food.category == 'American'}">
                                    American
                                </option>
                                <option value="Japanese" th:selected="${food != null and food.category == 'Japanese'}">
                                    Japanese
                                </option>
                                <option value="Mexican" th:selected="${food != null and food.category == 'Mexican'}">
                                    Mexican
                                </option>
                                <option value="Indian" th:selected="${food != null and food.category == 'Indian'}">
                                    Indian
                                </option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="foodPrice" class="form-label">Price ($) <span
                                    class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="foodPrice" name="price" step="0.1" min="0"
                                th:value="${food != null} ? ${food.price} : ''" required />
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Cancel
                    </button>
                    <button type="submit" form="addFoodForm" class="btn btn-primary" th:if="${food == null}">
                        <i class="fas fa-save me-2"></i>Add Food
                    </button>
                    <button type="submit" form="addFoodForm" class="btn btn-primary" th:if="${food != null}">
                        <i class="fas fa-save me-2"></i>Update Food
                    </button>
                </div>
            </div>
        </div>
    <div th:replace="~{fragments/admin/admin-add-foods-scripts :: admin-add-foods-scripts}"></div>
    </div>
</body>

</html>